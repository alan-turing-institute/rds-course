
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Module 2: Hands-on session (Solutions) &#8212; Research Data Science</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Overview" href="../m3/overview.html" />
    <link rel="prev" title="Module 2: Hands-on session" href="2-hands-on.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Research Data Science</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../index.html">
   Welcome to The Alan Turing Institute’s Introduction to Research Data Science course
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Module 1: Introduction to Data Science
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../m1/overview.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m1/1.1-WhatIsDataScience.html">
   1.1 What is (research) data science?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m1/1.2-DataScienceProjectLifecycle.html">
   1.2 Research Data Science project lifecycle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m1/1.3-EDIForDataScience.html">
   1.3 Equality, diversity and inclusion in data science
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m1/1.4-CollaborationAndReproducibility.html">
   1.4 Collaboration and reproducibility
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m1/hands-on.html">
   Module 1: Hands-on session
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Module 2: Handling data
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="2-overview.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="2-01-GettingLoading.html">
   2.1 Getting and Loading Data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2-01-01-WhereToFindData.html">
     2.1.1 Where to find data?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2-01-02-LegalityAndEthics.html">
     2.1.2 Legality and Ethics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2-01-03-PandasIntro.html">
     2.1.3 Pandas intro
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2-01-04-DataSourcesAndFormats.html">
     2.1.4 Data Sources and Formats
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2-01-05-ControllingAccess.html">
     2.1.5 Controlling access
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="2-02-ExploringWrangling.html">
   2.2 Exploring and Wrangling Data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="2-02-01-DataConsistency.html">
     2.2.1 Data Consistency
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2-02-02-ModifyingColumnsAndIndices.html">
     2.2.2 Modifying Columns and Indices
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2-02-03-FeatureEngineering.html">
     2.2.3 Feature Engineering
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="2-02-04-DataManipulation.html">
     2.2.4 Data Manipulation
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="2-02-04-01-TimeAndDateData.html">
       2.2.4.1 Time and Date Data
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="2-02-04-02-TextData.html">
       2.2.4.2 Text data
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="2-02-04-03-CategoricalData.html">
       2.2.4.3 Categorical Data
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="2-02-04-04-ImageData.html">
       2.2.4.4 Image Data
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2-02-05-PrivacyAndAnonymisation.html">
     2.2.5 Privacy and Anonymisation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2-02-06-LinkingDatasets.html">
     2.2.6 Linking Datasets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2-02-07-MissingData.html">
     2.2.7 Missing Data
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2-hands-on.html">
   Module 2: Hands-on session
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Module 2: Hands-on session (Solutions)
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Module 3: Data Visualisation &amp; Exploration
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../m3/overview.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m3/3.1-FiguresGoneWrong.html">
   3.1 Figures gone wrong
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m3/3.2-RulesOfTheGame.html">
   3.2 Rules of the data visualisation game
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m3/3.3-Atlas0fVisualisations.html">
   3.3 Atlas of Visualisations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m3/3.4-StoryTelling.html">
   3.4 Storytelling with data visualisation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m3/3.5-DataVisForExploration.html">
   3.5 Walkthrough: visualisation for data exploration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m3/hands-on.html">
   Module 3 hands-on session
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Module 4: Introduction to Modelling
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../m4/overview.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m4/4.1_What_and_Why.html">
   4.1 The What and Why of Statistical Modelling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m4/4.2_Fitting_Models.html">
   4.2 Fitting (Regression) Models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m4/4.3_Building_simple_model.html">
   4.3 Building a simple model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m4/4.4_Evaluating_a_model.html">
   4.4 Evaluating models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../m4/hands-on.html">
   Module 4 hands-on session
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/modules/m2/2-hands-on-complete.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/alan-turing-institute/rds-course"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/alan-turing-institute/rds-course/issues/new?title=Issue%20on%20page%20%2Fmodules/m2/2-hands-on-complete.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/alan-turing-institute/rds-course/develop?urlpath=tree/coursebook/modules/m2/2-hands-on-complete.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prerequisites">
   Prerequisites
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#clone-the-course-repository">
   Clone the Course Repository
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-local-python-environment">
   Create a Local Python Environment
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#managing-python-versions">
     Managing Python Versions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-a-virtual-environment-with-poetry">
     Creating a Virtual Environment with
     <code class="docutils literal notranslate">
      <span class="pre">
       Poetry
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#jupyter">
   Jupyter
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#download-data">
   Download Data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#notebook-setup">
   Notebook Setup
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exploring-the-downloaded-files">
   Exploring the Downloaded Files
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#code-for-later-skip-for-now">
   Code For Later (skip for now!)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#load-and-explore">
   Load and Explore
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#different-data-types">
   Different Data Types
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#making-things-more-readable">
   Making Things More Readable
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#self-reported-health">
   Self-Reported Health
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#missing-values">
   Missing Values
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#vs-2011">
   2007 vs 2011
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#uk-vs-spain">
   UK vs Spain
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#your-turn">
   Your Turn!
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="module-2-hands-on-session-solutions">
<h1>Module 2: Hands-on session (Solutions)<a class="headerlink" href="#module-2-hands-on-session-solutions" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These are sample solutions to the exercises for the Module 2 hands-on session. We don’t recommend looking here before you’ve attempted them!</p>
</div>
<p>In this hands-on notebook we’ll</p>
<ul class="simple">
<li><p>Create a Local Python Environment</p></li>
<li><p>Download the data</p></li>
<li><p>Load and explore the data</p></li>
<li><p>Understand the different data types present</p></li>
<li><p>Make the data more readable</p></li>
<li><p>Consider how missing data is represented</p></li>
<li><p>Explore some differences between 2007 and 2011 data</p></li>
<li><p>Compare data from UK and Spain respondees with respect to data missingness</p></li>
</ul>
<p>We have marked the exercise parts of this notebook as <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">TODO</span></code> with some comments as guidance. You can refer back to the taught material, or external documentation, for further information.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>To setup and run the commands in this notebook you will need a (preferably bash/similar) shell with these installed:</p>
<ul class="simple">
<li><p>Python 3.7 or later</p>
<ul>
<li><p>Check by running <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">--version</span></code> or <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">--version</span></code> in your shell</p></li>
</ul>
</li>
<li><p>Git (optional)</p>
<ul>
<li><p>Check by running <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">--version</span></code> in your shell</p></li>
</ul>
</li>
<li><p>Curl (optional)</p>
<ul>
<li><p>Check by running <code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">--version</span></code> in your shell</p></li>
</ul>
</li>
</ul>
<p>If you don’t have these we have instructions in our <a class="reference external" href="https://alan-turing-institute.github.io/rse-course/html/course_prerequisites/index.html">Research Software Engineering course</a>.</p>
</div>
<div class="section" id="clone-the-course-repository">
<h2>Clone the Course Repository<a class="headerlink" href="#clone-the-course-repository" title="Permalink to this headline">¶</a></h2>
<p>In order to work locally with this notebook, you should clone the course repository.</p>
<ol>
<li><p>Go to the GitHub repository in a web browser: <a class="reference external" href="https://github.com/alan-turing-institute/rds-course">https://github.com/alan-turing-institute/rds-course</a></p></li>
<li><p>Click on the green “Code” button and copy the address under “Clone - HTTPS”.</p></li>
<li><p>In your shell, run the following command from a sensible location (this will create a new dir for the course in current dir):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/alan-turing-institute/rds-course.git
</pre></div>
</div>
</li>
<li><p>Change directory to the repository root</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">rds</span><span class="o">-</span><span class="n">course</span>
</pre></div>
</div>
</li>
<li><p>We’re currently using the <code class="docutils literal notranslate"><span class="pre">develop</span></code> branch, so check that out</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">develop</span>
</pre></div>
</div>
</li>
</ol>
<p><strong>Troubleshooting:</strong></p>
<ul class="simple">
<li><p><strong>If you don’t have <code class="docutils literal notranslate"><span class="pre">git</span></code>:</strong> We recommend using git, but if you don’t have it installed you can download a zip of the code by clicking on “Download Zip” in step 2 above instead, and unpack it locally.</p></li>
<li><p><strong>If you previously cloned/downloaded the repo:</strong> Please run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">develop</span></code> and then <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> from the <code class="docutils literal notranslate"><span class="pre">rds-course</span></code> directory to ensure you have the latest version of the material.</p></li>
</ul>
</div>
<div class="section" id="create-a-local-python-environment">
<h2>Create a Local Python Environment<a class="headerlink" href="#create-a-local-python-environment" title="Permalink to this headline">¶</a></h2>
<p>We need to install third-party packages necessary for the course, with the same package versions as it was developed with to ensure compatibility and reproducibility.</p>
<div class="section" id="managing-python-versions">
<h3>Managing Python Versions<a class="headerlink" href="#managing-python-versions" title="Permalink to this headline">¶</a></h3>
<p>As well as the versions of packages your codebase should specify which version(s) of Python itself that it’s compatible with. The code for this course should run with Python 3.7 or above. We don’t cover it here to speedup setup, but if you need to use multiple versions of Python on your system we recommend <a class="reference external" href="https://github.com/pyenv/pyenv">Pyenv</a> and <a class="reference external" href="https://conda.io/projects/conda/en/latest/index.html">Conda</a>.</p>
</div>
<div class="section" id="creating-a-virtual-environment-with-poetry">
<h3>Creating a Virtual Environment with <code class="docutils literal notranslate"><span class="pre">Poetry</span></code><a class="headerlink" href="#creating-a-virtual-environment-with-poetry" title="Permalink to this headline">¶</a></h3>
<p>The Python ecosystem has many different ways of managing packaging and installing dependencies (<a class="reference external" href="https://packaging.python.org/key_projects/#pipenv">this page</a> lists some of them). The most well-known is <code class="docutils literal notranslate"><span class="pre">pip</span></code> with dependencies listed in a <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> file.</p>
<p>In this course we use the tool <a class="reference external" href="https://python-poetry.org/">Poetry</a>, which can help manage <a class="reference external" href="https://python-poetry.org/docs/managing-environments/">multiple environments</a>, in particular <a class="reference external" href="https://python-poetry.org/docs/managing-environments/#switching-between-environments">switching between environments </a>.</p>
<p>Dependencies are listed in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> and have versions fixed in <code class="docutils literal notranslate"><span class="pre">poetry.lock</span></code>. <code class="docutils literal notranslate"><span class="pre">Poetry</span></code> will pick these files up and install the required packages in a predictable manner, and into a virtual environment isolated from other projects on your system.</p>
<ol>
<li><p>Install <code class="docutils literal notranslate"><span class="pre">Poetry</span></code> by following their instructions <a class="reference external" href="https://python-poetry.org/docs/#installation">here</a>.</p></li>
<li><p>Change to the <code class="docutils literal notranslate"><span class="pre">rds-course</span></code> directory (the directory of the git repository cloned above), if you’re  not there already:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /path/to/rds-course
</pre></div>
</div>
</li>
<li><p>Set the relevant Python executable for Poetry to use:</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">--version</span></code> returns a version number of 3.7 or above:</p>
<ul>
<li><p>Skip to step 4</p></li>
</ul>
</li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">--version</span></code> is less than 3.7 (e.g. 2.7), but <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">--version</span></code> gives 3.7 or above:</p>
<ul>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">env</span> <span class="pre">use</span> <span class="pre">python3</span></code></p></li>
</ul>
</li>
<li><p>If you have a Python 3.7+ environment available somewhere else:</p>
<ul>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">env</span> <span class="pre">use</span> <span class="pre">/full/path/to/python</span></code></p></li>
</ul>
</li>
<li><p>If you don’t have Python 3.7+ installed or don’t know where to find it:</p>
<ul>
<li><p>Refer back to the instructions in the prerequisites and/or ask for help.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Run the following command to create the virtual environment and install the third-party packages necessary for the course:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry install
</pre></div>
</div>
</li>
<li><p>Check the details of the virtual environment that’s been created:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry env info
</pre></div>
</div>
</li>
<li><p>Initialise the environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry shell
</pre></div>
</div>
</li>
</ol>
<p>The last step creates a new shell setup to use the Python virtual environment we just created (e.g. <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">python</span></code>, should now show the path returned earlier by <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">env</span> <span class="pre">info</span></code> above, rather the path to your global Python executable). If you want to stop using the virtual environment <code class="docutils literal notranslate"><span class="pre">exit</span></code> the shell.</p>
<p><strong>Troubleshooting:</strong></p>
<ul class="simple">
<li><p><strong>If you don’t have <code class="docutils literal notranslate"><span class="pre">curl</span></code></strong>: <code class="docutils literal notranslate"><span class="pre">curl</span></code> is used to download a Python script (currently <a class="reference external" href="https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py">this script</a> but check the <a class="reference external" href="https://python-poetry.org/docs/#installation">Poetry documentation</a> for the latest URL). Save this script as <code class="docutils literal notranslate"><span class="pre">get-poetry.py</span></code> and then run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">get-poetry.py</span></code> to install Poetry.</p></li>
<li><p><strong>If you don’t want to use <code class="docutils literal notranslate"><span class="pre">Poetry</span></code></strong>: You can install the course dependencies by running <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">.</span></code> from the <code class="docutils literal notranslate"><span class="pre">rds-course</span></code> directory, but we recommend doing this in an alternative virtual environment of your choice (not in your global Python installation).</p></li>
</ul>
</div>
</div>
<div class="section" id="jupyter">
<h2>Jupyter<a class="headerlink" href="#jupyter" title="Permalink to this headline">¶</a></h2>
<p>We recommend use of <a class="reference external" href="https://jupyter.org/">JupyterLab</a> for running through the hands-on notebooks in this course.</p>
<p>JuypyterLab was installed into your Poetry environment in the previous step. We can launch a local instance, from the poetry environment terminal, with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jupyter lab <span class="c1"># from the root of the cloned github repository! &quot;rds-course&quot; directory</span>
</pre></div>
</div>
<p>We recommend following the rest of the notebook via the JupyterLab instance that should spawn!</p>
<p>Click through the file explorer in the left-hand pane to bring up this notebook.</p>
<p>The notebook should be present at: <code class="docutils literal notranslate"><span class="pre">rds-course/coursebook/modules/m2/2-hands-on.ipynb</span></code></p>
<p>If you’ve not used <code class="docutils literal notranslate"><span class="pre">Jupyter</span></code> before you might find their <a class="reference external" href="https://jupyter-notebook.readthedocs.io/en/stable/examples/Notebook/Notebook%20Basics.html">Notebook basics</a> and <a class="reference external" href="https://jupyter-notebook.readthedocs.io/en/stable/examples/Notebook/Running%20Code.html">Running code</a> documentation helpful.</p>
</div>
<div class="section" id="download-data">
<h2>Download Data<a class="headerlink" href="#download-data" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>As described in module 1, we can find the data available for download from the UK Data Service <a class="reference external" href="https://beta.ukdataservice.ac.uk/datacatalogue/studies/study?id=7724#%21/access-data">here</a></p></li>
<li><p>Observe the licence and take this opportunity to check your obligations</p></li>
<li><p>Download the CSV data</p></li>
<li><p>Unzip the data to <code class="docutils literal notranslate"><span class="pre">$PROJECT_ROOT/data</span></code> this should give us <code class="docutils literal notranslate"><span class="pre">$PROJECT_ROOT/data/UKDA-7724-csv</span></code></p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">$PROJECT_ROOT</span></code> is the root of the cloned github repository for this course. If you change the directory that you hold this data in, you’ll need to make appropriate changes to the <code class="docutils literal notranslate"><span class="pre">DATA_ROOT_PATH</span></code> variable below.</p>
</div>
<div class="section" id="notebook-setup">
<h2>Notebook Setup<a class="headerlink" href="#notebook-setup" title="Permalink to this headline">¶</a></h2>
<p>Import necessary packages for this work:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
<p>Define path to data. This relies on the data being saved in the specified location below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DATA_ROOT_PATH</span> <span class="o">=</span> <span class="s2">&quot;../../../data/UKDA-7724-csv&quot;</span> <span class="c1"># should match the path you unzipped the data to</span>

<span class="n">COMBINED_CSV_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DATA_ROOT_PATH</span><span class="p">,</span> <span class="s2">&quot;csv/eqls_2007and2011.csv&quot;</span><span class="p">)</span>
<span class="n">MAPPING_CSV_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DATA_ROOT_PATH</span><span class="p">,</span> <span class="s2">&quot;mrdoc/excel/eqls_api_map.csv&quot;</span><span class="p">)</span>

<span class="c1"># consts for loading categorical data value maps</span>
<span class="n">CATEGORICAL_VALUES_XLSX_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DATA_ROOT_PATH</span><span class="p">,</span> <span class="s2">&quot;mrdoc/excel/eqls_concordance_grid.xlsx&quot;</span><span class="p">)</span>
<span class="n">CATEGORICAL_VALUES_XLSX_SHEET_NAME</span> <span class="o">=</span> <span class="s2">&quot;Values&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exploring-the-downloaded-files">
<h2>Exploring the Downloaded Files<a class="headerlink" href="#exploring-the-downloaded-files" title="Permalink to this headline">¶</a></h2>
<p>Take some time to familiarise yourself with the file structure of the downloaded files (in the <code class="docutils literal notranslate"><span class="pre">UKDA-7724-csv</span></code> directory), opening them in Excel/Numbers/relevant application of your choice initially. In particular:</p>
<ul class="simple">
<li><p>The table of files <code class="docutils literal notranslate"><span class="pre">mrdoc/excel/7724_file_information_csv.csv</span></code></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">csv</span></code> directory</p>
<ul>
<li><p>What data does each file contain?</p></li>
</ul>
</li>
<li><p>The user guide <code class="docutils literal notranslate"><span class="pre">mrdoc/pdf/7724_eqls_2007-2011_user_guide_v2.pdf</span></code></p></li>
<li><p>The “Variables” and “Values” worksheet in <code class="docutils literal notranslate"><span class="pre">mrdoc/excel/eqls_concordance_grid.xlsx</span></code></p>
<ul>
<li><p>How many variables are there? Can they be grouped in any way?</p></li>
</ul>
</li>
</ul>
<p><strong>Answer:</strong> There are 199 variables listed in <code class="docutils literal notranslate"><span class="pre">mrdoc/excel/eqls_concordance_grid.xlsx</span></code>. There are a number of “Variable Groups” (e.g. “Family and Social Life”) and “Topic Classifications” (e.g. “Social stratification and groupings - Family life and marriage”)</p>
</div>
<div class="section" id="code-for-later-skip-for-now">
<h2>Code For Later (skip for now!)<a class="headerlink" href="#code-for-later-skip-for-now" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># optional extension exercise later, ignore if you&#39;re trying to write your own!</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1"># note only tested on &quot;Y11_Country&quot; var</span>
<span class="k">def</span> <span class="nf">parse_categorical_values</span><span class="p">(</span>
    <span class="n">categorical_values_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">var_name_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">var_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">values_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">categorical_values_df</span><span class="p">[</span><span class="n">categorical_values_df</span><span class="p">[</span><span class="n">var_name_col</span><span class="p">]</span> <span class="o">==</span> <span class="n">var_name</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;something has gone wrong, more than one row matches var name: </span><span class="si">{</span><span class="n">var_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">rows</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">vals_string</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">values_col</span><span class="p">]</span>
    <span class="c1"># lines look like: &quot;encoded_val = human_readable_val&quot; so split on &quot; = &quot;</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; = &quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">vals_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)])</span>
    <span class="c1"># ensure keys are ints</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="p">{</span><span class="nb">int</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">mapping</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="k">return</span> <span class="n">mapping</span>


<span class="k">def</span> <span class="nf">parse_country_values_2011</span><span class="p">(</span><span class="n">categorical_values_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
    <span class="k">return</span> <span class="n">parse_categorical_values</span><span class="p">(</span>
        <span class="n">categorical_values_df</span><span class="o">=</span><span class="n">categorical_values_df</span><span class="p">,</span>
        <span class="n">var_name_col</span><span class="o">=</span><span class="s2">&quot;Variable name&quot;</span><span class="p">,</span>
        <span class="n">var_name</span><span class="o">=</span><span class="s2">&quot;Y11_Country&quot;</span><span class="p">,</span>
        <span class="n">values_col</span><span class="o">=</span><span class="s2">&quot;Values if present - 2011&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="load-and-explore">
<h2>Load and Explore<a class="headerlink" href="#load-and-explore" title="Permalink to this headline">¶</a></h2>
<p>Read the combined 2007 and 2011 data into a pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ANSWER read in the file and display the head</span>
<span class="c1">####</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">COMBINED_CSV_PATH</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>

<span class="c1">####  </span>

<span class="c1"># checks - will produce an `AssertionError` until DataFrame loaded correctly</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">),</span> <span class="s2">&quot;df is not a DataFrame&quot;</span> <span class="c1"># check we&#39;ve loaded data into a DataFrame</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">==</span> <span class="mi">79270</span><span class="p">,</span> <span class="s2">&quot;unexpected no. of rows&quot;</span> <span class="c1"># check number of rows matches expected</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ipykernel_2844</span><span class="o">/</span><span class="mf">756009396.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># ANSWER read in the file and display the head</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="c1">####</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">COMBINED_CSV_PATH</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> 

<span class="nn">/opt/hostedtoolcache/Python/3.9.8/x64/lib/python3.9/site-packages/pandas/util/_decorators.py</span> in <span class="ni">wrapper</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">309</span>                     <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">310</span>                 <span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">311</span>             <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">312</span> 
<span class="g g-Whitespace">    </span><span class="mi">313</span>         <span class="k">return</span> <span class="n">wrapper</span>

<span class="nn">/opt/hostedtoolcache/Python/3.9.8/x64/lib/python3.9/site-packages/pandas/io/parsers/readers.py</span> in <span class="ni">read_csv</span><span class="nt">(filepath_or_buffer, sep, delimiter, header, names, index_col, usecols, squeeze, prefix, mangle_dupe_cols, dtype, engine, converters, true_values, false_values, skipinitialspace, skiprows, skipfooter, nrows, na_values, keep_default_na, na_filter, verbose, skip_blank_lines, parse_dates, infer_datetime_format, keep_date_col, date_parser, dayfirst, cache_dates, iterator, chunksize, compression, thousands, decimal, lineterminator, quotechar, quoting, doublequote, escapechar, comment, encoding, encoding_errors, dialect, error_bad_lines, warn_bad_lines, on_bad_lines, delim_whitespace, low_memory, memory_map, float_precision, storage_options)</span>
<span class="g g-Whitespace">    </span><span class="mi">584</span>     <span class="n">kwds</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwds_defaults</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">585</span> 
<span class="ne">--&gt; </span><span class="mi">586</span>     <span class="k">return</span> <span class="n">_read</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">587</span> 
<span class="g g-Whitespace">    </span><span class="mi">588</span> 

<span class="nn">/opt/hostedtoolcache/Python/3.9.8/x64/lib/python3.9/site-packages/pandas/io/parsers/readers.py</span> in <span class="ni">_read</span><span class="nt">(filepath_or_buffer, kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">480</span> 
<span class="g g-Whitespace">    </span><span class="mi">481</span>     <span class="c1"># Create the parser.</span>
<span class="ne">--&gt; </span><span class="mi">482</span>     <span class="n">parser</span> <span class="o">=</span> <span class="n">TextFileReader</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">483</span> 
<span class="g g-Whitespace">    </span><span class="mi">484</span>     <span class="k">if</span> <span class="n">chunksize</span> <span class="ow">or</span> <span class="n">iterator</span><span class="p">:</span>

<span class="nn">/opt/hostedtoolcache/Python/3.9.8/x64/lib/python3.9/site-packages/pandas/io/parsers/readers.py</span> in <span class="ni">__init__</span><span class="nt">(self, f, engine, **kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">809</span>             <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;has_index_names&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwds</span><span class="p">[</span><span class="s2">&quot;has_index_names&quot;</span><span class="p">]</span>
<span class="g g-Whitespace">    </span><span class="mi">810</span> 
<span class="ne">--&gt; </span><span class="mi">811</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_engine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">812</span> 
<span class="g g-Whitespace">    </span><span class="mi">813</span>     <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="nn">/opt/hostedtoolcache/Python/3.9.8/x64/lib/python3.9/site-packages/pandas/io/parsers/readers.py</span> in <span class="ni">_make_engine</span><span class="nt">(self, engine)</span>
<span class="g g-Whitespace">   </span><span class="mi">1038</span>             <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1039</span>         <span class="c1"># error: Too many arguments for &quot;ParserBase&quot;</span>
<span class="ne">-&gt; </span><span class="mi">1040</span>         <span class="k">return</span> <span class="n">mapping</span><span class="p">[</span><span class="n">engine</span><span class="p">](</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">)</span>  <span class="c1"># type: ignore[call-arg]</span>
<span class="g g-Whitespace">   </span><span class="mi">1041</span> 
<span class="g g-Whitespace">   </span><span class="mi">1042</span>     <span class="k">def</span> <span class="nf">_failover_to_python</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="nn">/opt/hostedtoolcache/Python/3.9.8/x64/lib/python3.9/site-packages/pandas/io/parsers/c_parser_wrapper.py</span> in <span class="ni">__init__</span><span class="nt">(self, src, **kwds)</span>
<span class="g g-Whitespace">     </span><span class="mi">49</span> 
<span class="g g-Whitespace">     </span><span class="mi">50</span>         <span class="c1"># open handles</span>
<span class="ne">---&gt; </span><span class="mi">51</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_open_handles</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">52</span>         <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">handles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<span class="g g-Whitespace">     </span><span class="mi">53</span> 

<span class="nn">/opt/hostedtoolcache/Python/3.9.8/x64/lib/python3.9/site-packages/pandas/io/parsers/base_parser.py</span> in <span class="ni">_open_handles</span><span class="nt">(self, src, kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">220</span>         <span class="n">Let</span> <span class="n">the</span> <span class="n">readers</span> <span class="nb">open</span> <span class="n">IOHandles</span> <span class="n">after</span> <span class="n">they</span> <span class="n">are</span> <span class="n">done</span> <span class="k">with</span> <span class="n">their</span> <span class="n">potential</span> <span class="n">raises</span><span class="o">.</span>
<span class="g g-Whitespace">    </span><span class="mi">221</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">222</span><span class="s2">         self.handles = get_handle(</span>
<span class="g g-Whitespace">    </span><span class="mi">223</span><span class="s2">             src,</span>
<span class="g g-Whitespace">    </span><span class="mi">224</span><span class="s2">             &quot;r&quot;,</span>

<span class="nn">/opt/hostedtoolcache/Python/3.9.8/x64/lib/python3.9/site-packages/pandas/io/common.py</span> in <span class="ni">get_handle</span><span class="nt">(path_or_buf, mode, encoding, compression, memory_map, is_text, errors, storage_options)</span>
<span class="g g-Whitespace">    </span><span class="mi">700</span><span class="s2">         if ioargs.encoding and &quot;b&quot; not in ioargs.mode:</span>
<span class="g g-Whitespace">    </span><span class="mi">701</span><span class="s2">             # Encoding</span>
<span class="ne">--&gt; </span><span class="mi">702</span><span class="s2">             handle = open(</span>
<span class="g g-Whitespace">    </span><span class="mi">703</span><span class="s2">                 handle,</span>
<span class="g g-Whitespace">    </span><span class="mi">704</span><span class="s2">                 ioargs.mode,</span>

<span class="ne">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;../../../data/UKDA-7724-csv/csv/eqls_2007and2011.csv&#39;
</pre></div>
</div>
</div>
</div>
<p>Take a look at some summary statistics and use these to assign the variables below correctly.</p>
<p>You can assign the variables manually from inspecting printed output or assign them results from methods/properties.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ANSWER - example functions to explore and answer questions below</span>

<span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ipykernel_2844</span><span class="o">/</span><span class="mf">3757882994.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># ANSWER - example functions to explore and answer questions below</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> 
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>

<span class="ne">NameError</span>: name &#39;df&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Wave</th>
      <th>Y11_Country</th>
      <th>Y11_Q31</th>
      <th>Y11_Q32</th>
      <th>Y11_ISCEDsimple</th>
      <th>Y11_Q49</th>
      <th>Y11_Q67_1</th>
      <th>Y11_Q67_2</th>
      <th>Y11_Q67_3</th>
      <th>Y11_Q67_4</th>
      <th>...</th>
      <th>DV_Q7</th>
      <th>DV_Q67</th>
      <th>DV_Q43Q44</th>
      <th>DV_Q54a</th>
      <th>DV_Q54b</th>
      <th>DV_Q55</th>
      <th>DV_Q56</th>
      <th>DV_Q8</th>
      <th>DV_Q10</th>
      <th>RowID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>79270.000000</td>
      <td>79270.000000</td>
      <td>78756.000000</td>
      <td>78769.000000</td>
      <td>78556.000000</td>
      <td>79082.000000</td>
      <td>43636.000000</td>
      <td>43636.000000</td>
      <td>43636.000000</td>
      <td>43636.000000</td>
      <td>...</td>
      <td>2225.000000</td>
      <td>43636.000000</td>
      <td>78312.000000</td>
      <td>43636.000000</td>
      <td>43636.000000</td>
      <td>43636.000000</td>
      <td>43636.000000</td>
      <td>43636.000000</td>
      <td>43636.000000</td>
      <td>79270.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>2.550473</td>
      <td>16.841138</td>
      <td>1.856049</td>
      <td>1.598141</td>
      <td>4.019146</td>
      <td>2.640955</td>
      <td>1.959368</td>
      <td>1.023673</td>
      <td>1.019204</td>
      <td>1.001971</td>
      <td>...</td>
      <td>52.612135</td>
      <td>1.086465</td>
      <td>2.485992</td>
      <td>2.815565</td>
      <td>2.925635</td>
      <td>0.303442</td>
      <td>0.231437</td>
      <td>3.931708</td>
      <td>3.283482</td>
      <td>39635.500000</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.497449</td>
      <td>9.358320</td>
      <td>1.186271</td>
      <td>1.276425</td>
      <td>1.368993</td>
      <td>0.987352</td>
      <td>0.197437</td>
      <td>0.152030</td>
      <td>0.137244</td>
      <td>0.044351</td>
      <td>...</td>
      <td>15.696943</td>
      <td>0.460388</td>
      <td>0.838558</td>
      <td>0.721642</td>
      <td>0.568403</td>
      <td>0.881979</td>
      <td>0.827727</td>
      <td>0.436254</td>
      <td>1.130667</td>
      <td>22883.422256</td>
    </tr>
    <tr>
      <th>min</th>
      <td>2.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>...</td>
      <td>5.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>2.000000</td>
      <td>9.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>3.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>...</td>
      <td>43.000000</td>
      <td>1.000000</td>
      <td>2.000000</td>
      <td>3.000000</td>
      <td>3.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>4.000000</td>
      <td>2.000000</td>
      <td>19818.250000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>3.000000</td>
      <td>16.000000</td>
      <td>1.000000</td>
      <td>2.000000</td>
      <td>4.000000</td>
      <td>3.000000</td>
      <td>2.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>...</td>
      <td>50.000000</td>
      <td>1.000000</td>
      <td>3.000000</td>
      <td>3.000000</td>
      <td>3.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>39635.500000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>3.000000</td>
      <td>25.000000</td>
      <td>3.000000</td>
      <td>2.000000</td>
      <td>5.000000</td>
      <td>4.000000</td>
      <td>2.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>...</td>
      <td>61.000000</td>
      <td>1.000000</td>
      <td>3.000000</td>
      <td>3.000000</td>
      <td>3.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>59452.750000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>3.000000</td>
      <td>35.000000</td>
      <td>4.000000</td>
      <td>5.000000</td>
      <td>8.000000</td>
      <td>4.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>...</td>
      <td>80.000000</td>
      <td>6.000000</td>
      <td>3.000000</td>
      <td>6.000000</td>
      <td>6.000000</td>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>79270.000000</td>
    </tr>
  </tbody>
</table>
<p>8 rows × 196 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Y11_Country&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>35
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ANSWER</span>
<span class="n">n_columns</span> <span class="o">=</span> <span class="mi">199</span> <span class="c1"># how many columns are there in the DataFrame? This matches the number expected from the documentation.</span>
<span class="n">n_float64_columns</span> <span class="o">=</span> <span class="mi">187</span> <span class="c1"># how many columns are of dtype float64?</span>
<span class="n">Y11_Q31_mean_value</span> <span class="o">=</span> <span class="mf">1.856049</span> <span class="c1">#  what is the mean of the values in the Y11_Q31 column?</span>
<span class="n">Y11_Country_n_unique</span> <span class="o">=</span> <span class="mi">35</span> <span class="c1"># how many unique values in the Y11_Country column?</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># should be hidden! don&#39;t look here!</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># not using assert statements as they give away the answers!</span>
<span class="n">correct</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">n_columns_result</span> <span class="o">=</span> <span class="s2">&quot;correct&quot;</span> <span class="k">if</span> <span class="n">n_columns</span> <span class="o">==</span> <span class="mi">199</span> <span class="k">else</span> <span class="s2">&quot;incorrect&quot;</span>
<span class="n">n_float64_result</span> <span class="o">=</span> <span class="s2">&quot;correct&quot;</span> <span class="k">if</span> <span class="n">n_float64_columns</span> <span class="o">==</span> <span class="mi">187</span> <span class="k">else</span> <span class="s2">&quot;incorrect&quot;</span>
<span class="n">Y11_Q31_mean_value_result</span> <span class="o">=</span> <span class="s2">&quot;correct&quot;</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">Y11_Q31_mean_value</span><span class="p">,</span> <span class="mf">1.856049</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;incorrect&quot;</span>
<span class="n">Y11_Country_n_unique_result</span> <span class="o">=</span> <span class="s2">&quot;correct&quot;</span> <span class="k">if</span> <span class="n">Y11_Country_n_unique</span> <span class="o">==</span> <span class="mi">35</span> <span class="k">else</span> <span class="s2">&quot;incorrect&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;n_columns answer </span><span class="si">{</span><span class="n">n_columns_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;n_float64_columns answer </span><span class="si">{</span><span class="n">n_float64_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Y11_Q31_mean_value answer </span><span class="si">{</span><span class="n">Y11_Q31_mean_value_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Y11_Country_n_unique answer </span><span class="si">{</span><span class="n">Y11_Country_n_unique_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>n_columns answer correct
n_float64_columns answer correct
Y11_Q31_mean_value answer correct
Y11_Country_n_unique answer correct
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="different-data-types">
<h2>Different Data Types<a class="headerlink" href="#different-data-types" title="Permalink to this headline">¶</a></h2>
<p>Are there columns containing the following types of data? If so give examples.</p>
<ul class="simple">
<li><p>Numeric data (without a set of pre-defined categories)</p></li>
<li><p>Binary data</p></li>
<li><p>Categorical data, unordered</p></li>
<li><p>Categorical data, ordered</p></li>
<li><p>Text data</p></li>
<li><p>Time or date data</p></li>
</ul>
<p>Note: The dataset contains at least 4 of these, try to have another look if you found fewer.</p>
<p><strong>Answer</strong>:</p>
<p>A few examples:</p>
<ul class="simple">
<li><p>Numeric data</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Y11_Q8</span></code> (How many hours would you prefer to work)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Y11_Q52</span></code> (How much time spent on travelling to work/study)</p></li>
</ul>
</li>
<li><p>Binary data</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Y11_Q67_1</span></code> (I am a citizen of the country)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Y11_HH2a</span></code> (Gender - discussion point re inclusivity)</p></li>
</ul>
</li>
<li><p>Categorical data, unordered</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Country</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Y11_EmploymentStatus</span></code> (e.g. no clear ordering between retired, unable to work, homemaker and unemployed)</p></li>
</ul>
</li>
<li><p>Categorical data, ordered</p>
<ul>
<li><p>Majority of the data can be treated as ordered categories.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Y11_Agecategory</span></code> (Age)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Y11_Q53a</span></code> (Quality of Health services)</p></li>
</ul>
</li>
<li><p>Text data</p>
<ul>
<li><p>There are no free text fields, but there are a couple of columns with strings (IDs/URLs mostly), e.g. <code class="docutils literal notranslate"><span class="pre">ISO3166_Country</span></code>, <code class="docutils literal notranslate"><span class="pre">UniqueID</span></code>.</p></li>
</ul>
</li>
<li><p>Time or date data</p>
<ul>
<li><p>None in this dataset (could claim that <code class="docutils literal notranslate"><span class="pre">Wave</span></code> is perhaps as it represents a year)</p></li>
</ul>
</li>
</ul>
<p>For one example of each type, what are the possible values the data can take, according to the documentation? What does each value mean? Is each possible value present in the dataset?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Numeric example:</span>
<span class="c1"># Note the question of &quot;what are the possible values&quot; only really makes sense for categorical data,</span>
<span class="c1"># but we could talk about the range of values in the data.</span>

<span class="n">df</span><span class="p">[</span><span class="s2">&quot;Y11_Q8&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<span class="c1"># units are hours</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    37958.000000
mean        29.658043
std         16.476718
min          0.000000
25%         20.000000
50%         36.000000
75%         40.000000
max        120.000000
Name: Y11_Q8, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Binary example:</span>

<span class="n">df</span><span class="p">[</span><span class="s2">&quot;Y11_Q67_1&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="c1"># 1 means No and 2 means Yes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.0    41863
1.0     1773
Name: Y11_Q67_1, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Unordered categorical example:</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;Y11_EmploymentStatus&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>

<span class="c1"># Values represent employment status: 1 = Employed (includes on leave), 2 = Unemployed, 3 = Unable to work - disability/illness,</span>
<span class="c1"># 4 = Retired, 5 = Homemaker, 6 = Student, 7 = Other&quot;</span>
<span class="c1"># There are rows with all 7 values present.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1    36381
4    22925
5     7372
2     5375
6     4259
3     1720
7     1238
Name: Y11_EmploymentStatus, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ordered categorical example:</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;Y11_Q53a&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>

<span class="c1"># Values are respondent&#39;s rating of the quality of health services, from 1 (very poor) to 10 (very high).</span>
<span class="c1"># There are rows with all 10 values present.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.0      3481
2.0      2876
3.0      5041
4.0      5963
5.0     12780
6.0      9705
7.0     13805
8.0     13970
9.0      5672
10.0     4715
Name: Y11_Q53a, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>What is the minimum, maximum and mean value in each of your example columns? Taking into consideration the type of data in the column, are all of these values meaningful?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Can use &quot;describe&quot; or the &quot;min&quot;, &quot;max&quot; and &quot;mean&quot; functions</span>

<span class="n">df</span><span class="p">[</span><span class="s2">&quot;Y11_Q8&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>  <span class="c1"># Numeric</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    37958.000000
mean        29.658043
std         16.476718
min          0.000000
25%         20.000000
50%         36.000000
75%         40.000000
max        120.000000
Name: Y11_Q8, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Y11_Q67_1&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>  <span class="c1"># Binary</span>

<span class="c1"># The mean represents the proportion of people that answered &quot;Yes&quot; here (1.96  means 96% of</span>
<span class="c1"># people answered Yes (2), and 4% no (1). Would be clearer if no was 0 and yes was 1.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    43636.000000
mean         1.959368
std          0.197437
min          1.000000
25%          2.000000
50%          2.000000
75%          2.000000
max          2.000000
Name: Y11_Q67_1, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Y11_EmploymentStatus&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span> <span class="c1"># Unordered category</span>

<span class="c1"># Note: The mean or an unordered category is not meaningful!</span>
<span class="c1"># E.g. if we had 2 people, one with a value of 4 (retired), and one with 5 (homemaker), we&#39;d compute</span>
<span class="c1"># a mean of 4.5 - does that mean they&#39;re part-time retired, part-time homemaker?!</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    79270.000000
mean         2.713145
std          1.793318
min          1.000000
25%          1.000000
50%          2.000000
75%          4.000000
max          7.000000
Name: Y11_EmploymentStatus, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Y11_Q53a&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>  <span class="c1"># Ordered  category</span>

<span class="c1"># Need to be careful about interpreting the mean for ordered categories. For this column the</span>
<span class="c1"># categories are ratings from 1 to 10, and the mean rating represents what you&#39;d expect. Others may</span>
<span class="c1"># be more nuanced, e.g. the age category column has categories with different sized bins (18-24</span>
<span class="c1"># covers 7 years, 35-49 covers 15 years, 65+ covers N years).</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    78008.000000
mean         6.113873
std          2.293152
min          1.000000
25%          5.000000
50%          6.000000
75%          8.000000
max         10.000000
Name: Y11_Q53a, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>For one of the categorical columns, replace the numerical encodings with their actual meaning (category title). You can do this by manually creating a Python dictionary with the values to replace (we’ll look at extracting them with code later). What is the most common value?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">status_encoding</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;Employed (includes on leave)&quot;</span><span class="p">,</span>
    <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;Unemployed&quot;</span><span class="p">,</span>
    <span class="mi">3</span><span class="p">:</span> <span class="s2">&quot;Unable to work - disability/illness&quot;</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">:</span> <span class="s2">&quot;Retired&quot;</span><span class="p">,</span>
    <span class="mi">5</span><span class="p">:</span> <span class="s2">&quot;Homemaker&quot;</span><span class="p">,</span>
    <span class="mi">6</span><span class="p">:</span> <span class="s2">&quot;Student&quot;</span><span class="p">,</span>
    <span class="mi">7</span><span class="p">:</span> <span class="s2">&quot;Other&quot;</span>
<span class="p">}</span>

<span class="n">employment_status</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Y11_EmploymentStatus&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">status_encoding</span><span class="p">)</span>
<span class="n">employment_status</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Employed (includes on leave)           36381
Retired                                22925
Homemaker                               7372
Unemployed                              5375
Student                                 4259
Unable to work - disability/illness     1720
Other                                   1238
Name: Y11_EmploymentStatus, dtype: int64
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="making-things-more-readable">
<h2>Making Things More Readable<a class="headerlink" href="#making-things-more-readable" title="Permalink to this headline">¶</a></h2>
<p>At the moment, we’ve got column headings such as <code class="docutils literal notranslate"><span class="pre">'Y11_Country'</span></code>, <code class="docutils literal notranslate"><span class="pre">'Y11_Q31'</span></code> and <code class="docutils literal notranslate"><span class="pre">'Y11_Q32'</span></code> in our data. These aren’t particularly helpful at a glance and we’d need to do some cross-referencing with <code class="docutils literal notranslate"><span class="pre">eqls_api_map.csv</span></code> to make sense of them.</p>
<p>To make things more readable, let’s rename our columns according to the <code class="docutils literal notranslate"><span class="pre">'VariableLabel'</span></code> column in <code class="docutils literal notranslate"><span class="pre">eqls_api_map.csv</span></code>.</p>
<p>However, because it can make <code class="docutils literal notranslate"><span class="pre">.</span></code> access a bit tricky, we’d like to make sure we don’t have any spaces or non-word characters in our new column names! For consistency, we’d like everything to be lower case.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># we have to explicitly use latin1 encoding as the file is not saved in utf-8 (our platform default)</span>
<span class="n">eqls_api_map_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">MAPPING_CSV_PATH</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
<span class="n">eqls_api_map_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>VariableName</th>
      <th>VariableLabel</th>
      <th>Question</th>
      <th>TopicValue</th>
      <th>KeywordValue</th>
      <th>VariableGroupValue</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Wave</td>
      <td>EQLS Wave</td>
      <td>EQLS Wave</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Administrative Variables</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Y11_Country</td>
      <td>Country</td>
      <td>Country</td>
      <td>Geographies</td>
      <td>NaN</td>
      <td>Household Grid and Country</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Y11_Q31</td>
      <td>Marital status</td>
      <td>Marital status</td>
      <td>Social stratification and groupings - Family l...</td>
      <td>Marital status</td>
      <td>Family and Social Life</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Y11_Q32</td>
      <td>No. of children</td>
      <td>Number of children of your own</td>
      <td>Social stratification and groupings - Family l...</td>
      <td>Children</td>
      <td>Family and Social Life</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Y11_ISCEDsimple</td>
      <td>Education completed</td>
      <td>Highest level of education completed</td>
      <td>Education - Higher and further</td>
      <td>Education levels</td>
      <td>Education</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>TODO:</p>
<ul class="simple">
<li><p>replace column names in <code class="docutils literal notranslate"><span class="pre">df</span></code> with corresponding entry in <code class="docutils literal notranslate"><span class="pre">'VariableLabel'</span></code> column from <code class="docutils literal notranslate"><span class="pre">eqls_api_map_df</span></code></p></li>
<li><p>ensure all column names are entirely lowercase</p></li>
<li><p>ensure only characters [a-zA-Z0-9_] are present in column names</p>
<ul>
<li><p>remove apostrophes (<code class="docutils literal notranslate"><span class="pre">&quot;'&quot;</span></code>)</p></li>
<li><p>replace otherwise non-matching (e.g. whitespace or <code class="docutils literal notranslate"><span class="pre">'/'</span></code>) character with <code class="docutils literal notranslate"><span class="pre">'_'</span></code></p></li>
<li><p>we don’t want consecutive <code class="docutils literal notranslate"><span class="pre">'_'</span></code> characters (e.g. <code class="docutils literal notranslate"><span class="pre">no_of_children</span></code> rather than <code class="docutils literal notranslate"><span class="pre">no__of_children</span></code>)</p></li>
</ul>
</li>
<li><p>keep a map (python <code class="docutils literal notranslate"><span class="pre">dict</span></code>) that shows the old -&gt; new column mapping in case we ever want to invert this transformation.</p></li>
</ul>
<p>Example manual mapping (you should produce this with a general code solution!):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="s1">&#39;Y11_Q32&#39;</span> <span class="o">-&gt;</span> <span class="s1">&#39;no_of_children&#39;</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="s1">&#39;Y11_Q67_4&#39;</span> <span class="o">-&gt;</span> <span class="s1">&#39;citizenship_dont_know&#39;</span><span class="p">,</span>
    <span class="o">...</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Answer</span>
<span class="n">old_cols</span> <span class="o">=</span> <span class="n">eqls_api_map_df</span><span class="p">[</span><span class="s2">&quot;VariableName&quot;</span><span class="p">]</span>

<span class="c1"># The 4 .str calls below:</span>
<span class="c1">#  convert to lowercase</span>
<span class="c1">#  remove apostrophes</span>
<span class="c1">#  replace whitespace with _</span>
<span class="c1">#  rremove consecutive underscores</span>
<span class="n">new_cols</span> <span class="o">=</span> <span class="n">eqls_api_map_df</span><span class="p">[</span><span class="s2">&quot;VariableLabel&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>\
                                        <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>\
                                        <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[^\w]&#39;</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>\
                                        <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_+&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>

<span class="n">column_mapping</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">old_cols</span><span class="p">,</span> <span class="n">new_cols</span><span class="p">))</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">column_mapping</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/var/folders/xv/d5nvn2ps5r3fcf276w707n01qdmpqf/T/ipykernel_20762/2321633883.py:9: FutureWarning: The default value of regex will change from True to False in a future version.
  new_cols = eqls_api_map_df[&quot;VariableLabel&quot;].str.lower()\
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># should be hidden</span>
<span class="c1"># manually pasted the answer here but not the code</span>
<span class="n">desired_column_mapping</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Wave&quot;</span><span class="p">:</span> <span class="s2">&quot;eqls_wave&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Country&quot;</span><span class="p">:</span> <span class="s2">&quot;country&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q31&quot;</span><span class="p">:</span> <span class="s2">&quot;marital_status&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q32&quot;</span><span class="p">:</span> <span class="s2">&quot;no_of_children&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_ISCEDsimple&quot;</span><span class="p">:</span> <span class="s2">&quot;education_completed&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q49&quot;</span><span class="p">:</span> <span class="s2">&quot;rural_urban_living&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q67_1&quot;</span><span class="p">:</span> <span class="s2">&quot;citizenship_country&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q67_2&quot;</span><span class="p">:</span> <span class="s2">&quot;citizenship_another_eu_member&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q67_3&quot;</span><span class="p">:</span> <span class="s2">&quot;citizenship_a_non_eu_country&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q67_4&quot;</span><span class="p">:</span> <span class="s2">&quot;citizenship_dont_know&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q67_5&quot;</span><span class="p">:</span> <span class="s2">&quot;citizenship_refusal&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Agecategory&quot;</span><span class="p">:</span> <span class="s2">&quot;age&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_HH2a&quot;</span><span class="p">:</span> <span class="s2">&quot;gender&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_HHsize&quot;</span><span class="p">:</span> <span class="s2">&quot;household_size&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_HHsize18plus&quot;</span><span class="p">:</span> <span class="s2">&quot;household_size_over_18&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_HHstructure&quot;</span><span class="p">:</span> <span class="s2">&quot;household_structure&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Education&quot;</span><span class="p">:</span> <span class="s2">&quot;education_3_groups&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_EmploymentStatus&quot;</span><span class="p">:</span> <span class="s2">&quot;employment_7_groups&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Incomequartiles_percapita&quot;</span><span class="p">:</span> <span class="s2">&quot;income_quartiles&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_RuralUrban&quot;</span><span class="p">:</span> <span class="s2">&quot;dv_rural_urban_living&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Degurba&quot;</span><span class="p">:</span> <span class="s2">&quot;degree_of_urbanisation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_CountryGroupEU28&quot;</span><span class="p">:</span> <span class="s2">&quot;country_group&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q33a&quot;</span><span class="p">:</span> <span class="s2">&quot;direct_contact_with_children&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q33b&quot;</span><span class="p">:</span> <span class="s2">&quot;direct_contact_with_parents&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q33c&quot;</span><span class="p">:</span> <span class="s2">&quot;direct_contact_with_other_relatives&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q33d&quot;</span><span class="p">:</span> <span class="s2">&quot;direct_contact_with_neighbours&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q34a&quot;</span><span class="p">:</span> <span class="s2">&quot;phone_internet_contact_with_children&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q34b&quot;</span><span class="p">:</span> <span class="s2">&quot;phone_internet_contact_with_parents&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q34c&quot;</span><span class="p">:</span> <span class="s2">&quot;phone_internet_contact_with_other_relatives&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q34d&quot;</span><span class="p">:</span> <span class="s2">&quot;phone_internet_contact_with_neighbours&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q35a&quot;</span><span class="p">:</span> <span class="s2">&quot;a_person_to_get_support_from_to_help_around_house_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q35b&quot;</span><span class="p">:</span> <span class="s2">&quot;a_person_to_get_advice_from_about_a_personal_family_matter&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q35c&quot;</span><span class="p">:</span> <span class="s2">&quot;a_person_to_get_support_from_when_looking_for_a_job&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q35d&quot;</span><span class="p">:</span> <span class="s2">&quot;a_person_to_get_support_from_when_feeling_depressed&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q35e&quot;</span><span class="p">:</span> <span class="s2">&quot;a_person_to_get_support_from_to_raise_emergency_money&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q42&quot;</span><span class="p">:</span> <span class="s2">&quot;health_condition&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q43&quot;</span><span class="p">:</span> <span class="s2">&quot;chronic_health_problems_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q44&quot;</span><span class="p">:</span> <span class="s2">&quot;limited_by_chronic_health_problems_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q17&quot;</span><span class="p">:</span> <span class="s2">&quot;no_of_rooms_in_accommodation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q18&quot;</span><span class="p">:</span> <span class="s2">&quot;tenure&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q19a&quot;</span><span class="p">:</span> <span class="s2">&quot;problems_with_accommodation_space&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q19b&quot;</span><span class="p">:</span> <span class="s2">&quot;problems_with_accommodation_rot_in_windows_etc_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q19c&quot;</span><span class="p">:</span> <span class="s2">&quot;problems_with_accommodation_damp_or_leaks&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q19d&quot;</span><span class="p">:</span> <span class="s2">&quot;problems_with_accommodation_no_toilet&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q19e&quot;</span><span class="p">:</span> <span class="s2">&quot;problems_with_accommodation_no_bath_shower&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q19f&quot;</span><span class="p">:</span> <span class="s2">&quot;problems_with_accommodation_no_outside_space&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q20&quot;</span><span class="p">:</span> <span class="s2">&quot;likelihood_of_leaving_accom_within_6_months&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q50a&quot;</span><span class="p">:</span> <span class="s2">&quot;neighbourhood_problems_noise&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q50b&quot;</span><span class="p">:</span> <span class="s2">&quot;neighbourhood_problems_air_quality&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q50c&quot;</span><span class="p">:</span> <span class="s2">&quot;neighbourhood_problems_quality_of_drinking_water&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q50d&quot;</span><span class="p">:</span> <span class="s2">&quot;neighbourhood_problems_crime_violence_or_vandalism&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q50e&quot;</span><span class="p">:</span> <span class="s2">&quot;neighbourhood_problems_litter_or_rubbish&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q50f&quot;</span><span class="p">:</span> <span class="s2">&quot;neighbourhood_problems_traffic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Accommproblems&quot;</span><span class="p">:</span> <span class="s2">&quot;no_of_problems_with_accommodation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q47a&quot;</span><span class="p">:</span> <span class="s2">&quot;difficult_to_see_a_doctor_because_of_distance_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q47b&quot;</span><span class="p">:</span> <span class="s2">&quot;difficult_to_see_a_doctor_because_of_delay_in_getting_appointment_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q47c&quot;</span><span class="p">:</span> <span class="s2">&quot;difficult_to_see_a_doctor_because_of_waiting_time_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q47d&quot;</span><span class="p">:</span> <span class="s2">&quot;difficult_to_see_a_doctor_because_of_cost_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q47e&quot;</span><span class="p">:</span> <span class="s2">&quot;difficult_to_see_a_doctor_because_of_lack_of_time_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q51a&quot;</span><span class="p">:</span> <span class="s2">&quot;access_to_postal_services_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q51b&quot;</span><span class="p">:</span> <span class="s2">&quot;access_to_banking_services_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q51c&quot;</span><span class="p">:</span> <span class="s2">&quot;access_to_public_transport_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q51d&quot;</span><span class="p">:</span> <span class="s2">&quot;access_to_cinema_theatre_and_cultural_centre_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q51e&quot;</span><span class="p">:</span> <span class="s2">&quot;access_to_recreational_or_green_areas_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q52&quot;</span><span class="p">:</span> <span class="s2">&quot;how_much_time_spent_on_travelling_to_work_study_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q53a&quot;</span><span class="p">:</span> <span class="s2">&quot;quality_of_health_services_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q53b&quot;</span><span class="p">:</span> <span class="s2">&quot;quality_of_education_system_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q53c&quot;</span><span class="p">:</span> <span class="s2">&quot;quality_of_public_transport_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q53d&quot;</span><span class="p">:</span> <span class="s2">&quot;quality_of_child_care_services_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q53e&quot;</span><span class="p">:</span> <span class="s2">&quot;quality_of_long_term_care_services_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q53f&quot;</span><span class="p">:</span> <span class="s2">&quot;quality_of_social_municipal_housing_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q53g&quot;</span><span class="p">:</span> <span class="s2">&quot;quality_of_state_pension_system_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q54a_1&quot;</span><span class="p">:</span> <span class="s2">&quot;i_or_someone_else_in_household_used_child_care_in_12_months&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q54a_2&quot;</span><span class="p">:</span> <span class="s2">&quot;someone_close_outside_household_used_child_care_in_12_months&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q54a_3&quot;</span><span class="p">:</span> <span class="s2">&quot;nobody_used_child_care_in_12_months&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q54a_4&quot;</span><span class="p">:</span> <span class="s2">&quot;child_care_used_in_12_months_dont_know&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q54a_5&quot;</span><span class="p">:</span> <span class="s2">&quot;child_care_used_in_12_months_refusal&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q54b_1&quot;</span><span class="p">:</span> <span class="s2">&quot;i_or_someone_else_in_household_used_long_term_care_in_12_months&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q54b_2&quot;</span><span class="p">:</span> <span class="s2">&quot;someone_close_outside_household_used_long_term_care_in_12_months&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q54b_3&quot;</span><span class="p">:</span> <span class="s2">&quot;nobody_used_long_term_care_in_12_months&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q54b_4&quot;</span><span class="p">:</span> <span class="s2">&quot;long_term_care_used_in_12_months_dont_know&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q54b_5&quot;</span><span class="p">:</span> <span class="s2">&quot;long_term_care_used_in_12_months_refusal&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q55a&quot;</span><span class="p">:</span> <span class="s2">&quot;difficult_to_use_child_care_because_of_cost_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q55b&quot;</span><span class="p">:</span> <span class="s2">&quot;difficult_to_use_child_care_because_of_availability_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q55c&quot;</span><span class="p">:</span> <span class="s2">&quot;difficult_to_use_child_care_because_of_access_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q55d&quot;</span><span class="p">:</span> <span class="s2">&quot;difficult_to_use_child_care_because_of_quality_of_care_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q56a&quot;</span><span class="p">:</span> <span class="s2">&quot;difficult_to_use_long_term_care_because_of_cost_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q56b&quot;</span><span class="p">:</span> <span class="s2">&quot;difficult_to_use_long_term_care_because_of_availability_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q56c&quot;</span><span class="p">:</span> <span class="s2">&quot;difficult_to_use_long_term_care_because_of_access_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q56d&quot;</span><span class="p">:</span> <span class="s2">&quot;difficult_to_use_long_term_care_because_of_quality_of_care_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q24&quot;</span><span class="p">:</span> <span class="s2">&quot;can_most_people_be_trusted_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q25a&quot;</span><span class="p">:</span> <span class="s2">&quot;how_much_tension_between_poor_and_rich_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q25b&quot;</span><span class="p">:</span> <span class="s2">&quot;how_much_tension_between_management_and_workers_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q25c&quot;</span><span class="p">:</span> <span class="s2">&quot;how_much_tension_between_men_and_women_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q25d&quot;</span><span class="p">:</span> <span class="s2">&quot;how_much_tension_between_old_and_young_people_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q25e&quot;</span><span class="p">:</span> <span class="s2">&quot;how_much_tension_between_different_racial_ethnic_groups_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q25f&quot;</span><span class="p">:</span> <span class="s2">&quot;how_much_tension_between_different_religious_groups_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q25g&quot;</span><span class="p">:</span> <span class="s2">&quot;how_much_tension_between_groups_with_different_sexual_orientation_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q28a&quot;</span><span class="p">:</span> <span class="s2">&quot;how_much_trust_the_parliament_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q28b&quot;</span><span class="p">:</span> <span class="s2">&quot;how_much_trust_the_legal_system_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q28c&quot;</span><span class="p">:</span> <span class="s2">&quot;how_much_trust_the_press_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q28d&quot;</span><span class="p">:</span> <span class="s2">&quot;how_much_trust_the_police_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q28e&quot;</span><span class="p">:</span> <span class="s2">&quot;how_much_trust_the_government_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q28f&quot;</span><span class="p">:</span> <span class="s2">&quot;how_much_trust_the_local_authorities_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q21a&quot;</span><span class="p">:</span> <span class="s2">&quot;how_frequently_attend_religious_services_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q21b&quot;</span><span class="p">:</span> <span class="s2">&quot;how_frequently_use_the_internet_other_than_for_work_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q21c&quot;</span><span class="p">:</span> <span class="s2">&quot;how_frequently_take_part_in_sports_or_exercise_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q21d&quot;</span><span class="p">:</span> <span class="s2">&quot;how_frequently_participate_in_social_activities_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q22a&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_worked_unpaid_for_community_services_last_12_months_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q22b&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_worked_unpaid_for_education_cultural_etc_organisation_last_12_months_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q22c&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_worked_unpaid_for_social_movements_charities_last_12_months_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q22d&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_worked_unpaid_for_political_parties_or_trade_unions_last_12_months_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q22e&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_worked_unpaid_for_other_voluntary_org_last_12_months_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q23a&quot;</span><span class="p">:</span> <span class="s2">&quot;attended_a_trade_union_political_party_meeting_last_12_months_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q23b&quot;</span><span class="p">:</span> <span class="s2">&quot;attended_a_protest_or_demonstration_last_12_months_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q23c&quot;</span><span class="p">:</span> <span class="s2">&quot;signed_a_petition_last_12_months_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q23d&quot;</span><span class="p">:</span> <span class="s2">&quot;contacted_a_politician_last_12_months_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q29e&quot;</span><span class="p">:</span> <span class="s2">&quot;feel_left_out_of_sociey_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q29f&quot;</span><span class="p">:</span> <span class="s2">&quot;cant_find_the_way_because_life_has_become_so_complicated_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q29g&quot;</span><span class="p">:</span> <span class="s2">&quot;the_value_of_what_i_do_is_not_recognised_by_others_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q29h&quot;</span><span class="p">:</span> <span class="s2">&quot;people_look_down_on_me_because_of_my_job_situation_or_income_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q29i&quot;</span><span class="p">:</span> <span class="s2">&quot;feel_close_to_people_in_the_area_where_i_live&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_SocExIndex&quot;</span><span class="p">:</span> <span class="s2">&quot;social_exclusion_index&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Volunteering&quot;</span><span class="p">:</span> <span class="s2">&quot;volunteering_frequency&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q57&quot;</span><span class="p">:</span> <span class="s2">&quot;personal_financial_situation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q58&quot;</span><span class="p">:</span> <span class="s2">&quot;household_able_to_make_ends_meet_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q59a&quot;</span><span class="p">:</span> <span class="s2">&quot;can_afford_to_keep_home_adequately_warm_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q59b&quot;</span><span class="p">:</span> <span class="s2">&quot;can_afford_to_pay_for_a_weeks_annual_holiday_away_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q59c&quot;</span><span class="p">:</span> <span class="s2">&quot;can_afford_to_replace_any_worn_out_furniture_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q59d&quot;</span><span class="p">:</span> <span class="s2">&quot;can_afford_a_meal_with_meat_chicken_fish_every_second_day_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q59e&quot;</span><span class="p">:</span> <span class="s2">&quot;can_afford_to_buy_new_rather_than_second_hand_clothes_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q59f&quot;</span><span class="p">:</span> <span class="s2">&quot;can_afford_to_have_friends_or_family_for_a_drink_meal_at_least_once_a_month_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q60a&quot;</span><span class="p">:</span> <span class="s2">&quot;rent_mortgage_payments_for_accommodation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q60b&quot;</span><span class="p">:</span> <span class="s2">&quot;utility_bills_such_as_electricity_water_gas&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q60c&quot;</span><span class="p">:</span> <span class="s2">&quot;payments_for_consumer_loans_credit_cards&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q60d&quot;</span><span class="p">:</span> <span class="s2">&quot;payments_for_informal_loans_from_friends_relatives&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q65&quot;</span><span class="p">:</span> <span class="s2">&quot;financial_situation_of_your_household_compared_to_12_months_ago_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q66&quot;</span><span class="p">:</span> <span class="s2">&quot;household_financial_expectations_for_th_12_months_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Deprindex&quot;</span><span class="p">:</span> <span class="s2">&quot;deprivation_index_no_of_items_hhold_cant_afford&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q29a&quot;</span><span class="p">:</span> <span class="s2">&quot;i_am_optimistic_about_the_future&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q29b&quot;</span><span class="p">:</span> <span class="s2">&quot;i_generally_feel_that_what_i_do_in_life_is_worthwhile&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q29c&quot;</span><span class="p">:</span> <span class="s2">&quot;i_feel_i_am_free_to_decide_how_to_live_my_life&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q29d&quot;</span><span class="p">:</span> <span class="s2">&quot;i_seldom_have_time_to_do_the_things_i_really_enjoy&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q30&quot;</span><span class="p">:</span> <span class="s2">&quot;how_satisfied_with_life_these_days_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q40a&quot;</span><span class="p">:</span> <span class="s2">&quot;how_satisfied_with_education_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q40b&quot;</span><span class="p">:</span> <span class="s2">&quot;how_satisfied_with_present_job_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q40c&quot;</span><span class="p">:</span> <span class="s2">&quot;how_satisfied_with_present_standard_of_living_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q40d&quot;</span><span class="p">:</span> <span class="s2">&quot;how_satisfied_with_accommodation_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q40e&quot;</span><span class="p">:</span> <span class="s2">&quot;how_satisfied_with_family_life_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q40f&quot;</span><span class="p">:</span> <span class="s2">&quot;how_satisfied_with_health_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q40g&quot;</span><span class="p">:</span> <span class="s2">&quot;how_satisfied_with_social_life_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q40h&quot;</span><span class="p">:</span> <span class="s2">&quot;how_satisfied_with_economic_situation_in_the_country_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q41&quot;</span><span class="p">:</span> <span class="s2">&quot;how_happy_are_you_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q45a&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_felt_cheerful_and_in_good_spirits_last_2_weeks_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q45b&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_felt_calm_and_relaxed_last_2_weeks_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q45c&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_felt_active_and_vigorous_last_2_weeks_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q45d&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_woke_up_feeling_fresh_and_rested_last_2_weeks_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q45e&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_felt_your_daily_life_has_been_filled_with_things_that_interest_you_last_2_weeks_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q46a&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_felt_particularly_tense_last_2_weeks_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q46b&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_felt_lonely_last_2_weeks_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q46c&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_felt_downhearted_and_depressed_last_2_weeks_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_MWIndex&quot;</span><span class="p">:</span> <span class="s2">&quot;who_5_mental_wellbeing_index&quot;</span><span class="p">,</span>
    <span class="s2">&quot;w4&quot;</span><span class="p">:</span> <span class="s2">&quot;final_weight_trimmed_and_standardised&quot;</span><span class="p">,</span>
    <span class="s2">&quot;w5_EU28&quot;</span><span class="p">:</span> <span class="s2">&quot;cross_national_weight_eu28_to_calculate_averages_for_all_eu_in_2013_incl_croatia_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;w5_total&quot;</span><span class="p">:</span> <span class="s2">&quot;weight_5_total&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q7&quot;</span><span class="p">:</span> <span class="s2">&quot;how_many_hours_work_per_week_in_1st_job_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q8&quot;</span><span class="p">:</span> <span class="s2">&quot;how_many_hours_per_week_would_you_prefer_to_work_at_present_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q9&quot;</span><span class="p">:</span> <span class="s2">&quot;how_many_hours_does_your_partner_work_per_week_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q10&quot;</span><span class="p">:</span> <span class="s2">&quot;how_many_hours_per_week_would_you_prefer_your_partner_to_work_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q11&quot;</span><span class="p">:</span> <span class="s2">&quot;working_hours_fit_with_family_social_commitments_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q12a&quot;</span><span class="p">:</span> <span class="s2">&quot;come_home_from_work_too_tired_to_do_some_of_the_household_jobs&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q12b&quot;</span><span class="p">:</span> <span class="s2">&quot;difficult_to_fulfil_family_responsibilities_because_of_the_time_at_work&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q12c&quot;</span><span class="p">:</span> <span class="s2">&quot;difficult_to_concentrate_at_work_because_of_family_responsibilities&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q15&quot;</span><span class="p">:</span> <span class="s2">&quot;how_likely_to_lose_job_in_6_months_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q16&quot;</span><span class="p">:</span> <span class="s2">&quot;how_likely_to_find_another_job_of_similar_salary_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q36a&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_care_for_your_children_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q36b&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_cook_and_doing_housework_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q36c&quot;</span><span class="p">:</span> <span class="s2">&quot;how_often_care_for_elderly_or_disabled_relatives_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q38&quot;</span><span class="p">:</span> <span class="s2">&quot;the_share_of_housework_you_do_is_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q39a&quot;</span><span class="p">:</span> <span class="s2">&quot;as_much_time_as_would_like_with_family_members_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q39b&quot;</span><span class="p">:</span> <span class="s2">&quot;as_much_time_as_would_like_with_others_not_family_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q39c&quot;</span><span class="p">:</span> <span class="s2">&quot;as_much_time_as_would_like_on_own_hobbies_interests_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q39d&quot;</span><span class="p">:</span> <span class="s2">&quot;as_much_time_as_would_like_on_voluntary_work_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Strainbasedconflict&quot;</span><span class="p">:</span> <span class="s2">&quot;work_life_balance_conflict_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q7a&quot;</span><span class="p">:</span> <span class="s2">&quot;worked_at_an_additional_paid_job_last_4_weeks_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Y11_Q7b&quot;</span><span class="p">:</span> <span class="s2">&quot;how_many_hours_per_week_worked_in_the_additional_job_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DV_Q7&quot;</span><span class="p">:</span> <span class="s2">&quot;dv_total_number_of_working_hours&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DV_Q67&quot;</span><span class="p">:</span> <span class="s2">&quot;dv_citizenship&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DV_Q43Q44&quot;</span><span class="p">:</span> <span class="s2">&quot;dv_any_limiting_not_limiting_chronic_health_problem_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DV_Q54a&quot;</span><span class="p">:</span> <span class="s2">&quot;dv_anyone_used_would_have_like_to_use_child_care_last_12_months_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DV_Q54b&quot;</span><span class="p">:</span> <span class="s2">&quot;dv_anyone_used_would_have_like_to_use_long_term_care_last_12_months_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DV_Q55&quot;</span><span class="p">:</span> <span class="s2">&quot;dv_no_of_factors_which_made_it_difficult_to_use_child_care_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DV_Q56&quot;</span><span class="p">:</span> <span class="s2">&quot;dv_no_of_factors_which_made_it_difficult_to_use_long_term_care_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DV_Q8&quot;</span><span class="p">:</span> <span class="s2">&quot;dv_preferred_working_hours_3_groups_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DV_Q10&quot;</span><span class="p">:</span> <span class="s2">&quot;dv_preferred_working_hours_of_respondents_partner_3_groups_&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ISO3166_Country&quot;</span><span class="p">:</span> <span class="s2">&quot;iso3166_country_url&quot;</span><span class="p">,</span>
    <span class="s2">&quot;RowID&quot;</span><span class="p">:</span> <span class="s2">&quot;rowid_for_the_uk_data_service_public_api&quot;</span><span class="p">,</span>
    <span class="s2">&quot;URIRowID&quot;</span><span class="p">:</span> <span class="s2">&quot;root_uri_for_a_row_respondent_that_displays_all_data_values_for_a_single_row_via_the_uk_data_service_public_api&quot;</span><span class="p">,</span>
    <span class="s2">&quot;UniqueID&quot;</span><span class="p">:</span> <span class="s2">&quot;unique_respondent_id&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># check each in turn to give best error</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Checking each column...&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">old_val</span> <span class="ow">in</span> <span class="n">desired_column_mapping</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="n">column_mapping</span><span class="p">[</span><span class="n">old_val</span><span class="p">]</span> <span class="o">==</span> <span class="n">desired_column_mapping</span><span class="p">[</span><span class="n">old_val</span><span class="p">]</span>
        <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;mismatch at </span><span class="si">{</span><span class="n">old_val</span><span class="si">}</span><span class="s2">.</span>
<span class="s2">Got: </span><span class="si">{</span><span class="n">column_mapping</span><span class="p">[</span><span class="n">old_val</span><span class="p">]</span><span class="si">}</span><span class="s2">, expected: </span><span class="si">{</span><span class="n">desired_column_mapping</span><span class="p">[</span><span class="n">old_val</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">Exiting check. There may be further errors.&quot;&quot;&quot;</span>
    <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;Encountered a KeyError. This means the expected key isn&#39;t in your column mapping!&quot;</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="n">e</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Column mapping correct... Checking df columns set correctly...&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">all</span><span class="p">(</span>
    <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="n">desired_column_mapping</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="p">),</span> <span class="s2">&quot;New column names not set on df&quot;</span>

<span class="c1"># otherwise...</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Success!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Checking each column...
Column mapping correct... Checking df columns set correctly...
Success!
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="self-reported-health">
<h2>Self-Reported Health<a class="headerlink" href="#self-reported-health" title="Permalink to this headline">¶</a></h2>
<p>The research question we defined in Module 1 and will explore in more detail in Modules 3 and 4 aims to explore the contribution of various factors on self-reported health.</p>
<p>Which column in the dataset contains self-reported health values? How many people had “Very good” self-reported health?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The relevant column is &quot;health_condition&quot; (Y11_Q42 before renaming)</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;health_condition&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>

<span class="c1"># 16898 people reported &quot;very good&quot; health (value of 1 below)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.0    16898
2.0    31248
3.0    22265
4.0     6916
5.0     1802
Name: health_condition, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>For the models we develop in Module 4 we’ll convert self-reported health into a binary variable. What might be a sensible way to group the categories into only two possible values? Create a new column with your proposed binary encoding for self-reported health.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Could assign 1, 2, 3 (very good, good, fair) as &quot;good health&quot;, and 4, 5 (bad, very bad) as &quot;bad health&quot;.</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;bad_health&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;health_condition&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s2">&quot;health_condition&quot;</span><span class="p">,</span> <span class="s2">&quot;bad_health&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

<span class="c1"># Note this creates very imbalanced classes.</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;bad_health&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>health_condition</th>
      <th>bad_health</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>71338</th>
      <td>4.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>71986</th>
      <td>1.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>46178</th>
      <td>2.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>36138</th>
      <td>3.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>28539</th>
      <td>1.0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0    70552
1     8718
Name: bad_health, dtype: int64
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="missing-values">
<h2>Missing Values<a class="headerlink" href="#missing-values" title="Permalink to this headline">¶</a></h2>
<p>There are at least three different ways missing data and unknown information are represented in this dataset.</p>
<p>Look at one row of the data. What value does Pandas use to represent missing data? How many missing values are there in the row you picked?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="c1"># missing values represented by &quot;nan&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([2, 1, 4.0, 0.0, 4.0, 4.0, nan, nan, nan, nan, nan, 1, 1, 4, nan, 5,
       2.0, 6, nan, 2.0, nan, 2, nan, nan, nan, nan, nan, nan, nan, nan,
       nan, nan, nan, nan, nan, 1.0, 2.0, nan, 4.0, 3.0, 1.0, 2.0, 2.0,
       2.0, 2.0, 1.0, 4.0, nan, nan, nan, nan, nan, nan, 2.0, nan, nan,
       nan, nan, nan, nan, nan, nan, nan, nan, nan, 7.0, 6.0, 8.0, 7.0,
       nan, nan, 6.0, nan, nan, nan, nan, nan, nan, nan, nan, nan, nan,
       nan, nan, nan, nan, nan, nan, nan, nan, 6.0, 2.0, 2.0, 2.0, 2.0,
       2.0, 2.0, nan, 7.0, 6.0, 7.0, 8.0, 8.0, nan, nan, nan, nan, nan,
       nan, nan, nan, nan, nan, 2.0, nan, nan, 2.0, 3.0, 1.0, 2.0, 4.0,
       nan, 3.5, nan, nan, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 2.0, 2.0,
       nan, nan, nan, nan, 0.0, 2.0, nan, nan, nan, 3.0, 9.0, nan, 9.0,
       7.0, 8.0, 10.0, 10.0, nan, 7.0, 3.0, 2.0, 2.0, 1.0, 2.0, nan, nan,
       nan, 80.0, 3.6421, 1.80451061034635, 1.80982660081538, nan, nan,
       nan, nan, nan, nan, nan, nan, nan, nan, nan, 2.0, 5.0, 2.0, nan,
       nan, nan, nan, nan, nan, nan, nan, nan, 3.0, nan, nan, nan, nan,
       nan, nan, &#39;https://www.iso.org/obp/ui/#iso:code:3166:AT&#39;, 1,
       &#39;https://api.ukdataservice.ac.uk/V1/datasets/eqls/rows/1&#39;,
       &#39;AT9000083&#39;, 0], dtype=object)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="c1"># no. of missing values in this row</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>113
</pre></div>
</div>
</div>
</div>
<p>Looking at the possible values for each column in the dataset documentation, find two different columns and at least two different values that are also used to represent missing or unknown information.</p>
<p><strong>Answer:</strong> Examples include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">education_3_groups</span></code> (<code class="docutils literal notranslate"><span class="pre">Y11_Education</span></code> before renaming)</p>
<ul>
<li><p>5 = “Don’t know”, 6 = “Refused to Answer”.</p></li>
<li><p>4 = “Educated abroad”: Could also be considered missing (as we don’t know whether it was primary/secondary/tertiary education)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">direct_contact_with_children</span></code> (<code class="docutils literal notranslate"><span class="pre">Y11_Q33a</span></code> before renaming)</p>
<ul>
<li><p>6 = “NA”</p></li>
</ul>
</li>
</ul>
<p>For the columns you picked:</p>
<ul class="simple">
<li><p>How many missing values does Pandas say the column has?</p></li>
<li><p>How many values match the numeric representation of missing data you found from the documentation (e.g. if the documentation says -99 means unknown, how many -99 values are there in the column)?</p></li>
<li><p>Does Pandas include the numeric representation in its count of missing values?</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;education_3_groups&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="s2">&quot;Pandas missing values&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="s2">&quot;Numeric representation of missing values</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;direct_contact_with_children&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="s2">&quot;Pandas missing values&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">==</span> <span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="s2">&quot;Numeric representation of missing values&quot;</span><span class="p">)</span>

<span class="c1"># In both cases Pandas does NOT know to include the numeric values in its count of missing data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>education_3_groups : 623 Pandas missing values
education_3_groups : 276 Numeric representation of missing values

direct_contact_with_children : 47519 Pandas missing values
direct_contact_with_children : 6860 Numeric representation of missing values
</pre></div>
</div>
</div>
</div>
<p>Replace the numbers representing missing values in the columns you picked with the <code class="docutils literal notranslate"><span class="pre">NaN</span></code> type from <code class="docutils literal notranslate"><span class="pre">numpy</span></code>. What is the Pandas count of missing values now?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;education_3_groups&quot;</span>
<span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="s2">&quot;Pandas missing values&quot;</span><span class="p">)</span>

<span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;direct_contact_with_children&quot;</span>
<span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="s2">&quot;Pandas missing values&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>education_3_groups : 899 Pandas missing values
direct_contact_with_children : 54379 Pandas missing values
</pre></div>
</div>
</div>
</div>
<p>Are there different types of missing data in the dataset (different reasons values can be unknown)? Does this have any implications for the way you would analyse the data?</p>
<p><strong>Answer:</strong> Yes, as described above in the <code class="docutils literal notranslate"><span class="pre">education_3_groups</span></code> values could be unknown becuase they’re missing, the person refused to anwer, or the person was educated abroad. Being educated abroad, for example, is quite a different reason for not knowing what level of education they received (and perhaps could be correlated with having more opportunities or wealth).</p>
</div>
<div class="section" id="vs-2011">
<h2>2007 vs 2011<a class="headerlink" href="#vs-2011" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Which column should be used to distinguish between the collection years? (2007 and 2011)</p></li>
<li><p>How many rows do we have for each year?</p></li>
<li><p>For each collection year, what % of null values do we have for each column?</p>
<ul>
<li><p>Why is this?</p></li>
<li><p>Display these %s in descending  order sorted by: 2007 then 2011</p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Column to use is &quot;eqls_wave&quot;</span>
<span class="c1"># 2 is 2007, and 3 is 2011</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;eqls_wave&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3    43636
2    35634
Name: eqls_wave, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">missing</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;eqls_wave&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">g</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">missing</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>eqls_wave</th>
      <th>2</th>
      <th>3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>difficult_to_use_long_term_care_because_of_quality_of_care_</th>
      <td>100.0</td>
      <td>89.603</td>
    </tr>
    <tr>
      <th>difficult_to_use_long_term_care_because_of_cost_</th>
      <td>100.0</td>
      <td>89.534</td>
    </tr>
    <tr>
      <th>difficult_to_use_long_term_care_because_of_access_</th>
      <td>100.0</td>
      <td>89.495</td>
    </tr>
    <tr>
      <th>difficult_to_use_long_term_care_because_of_availability_</th>
      <td>100.0</td>
      <td>89.433</td>
    </tr>
    <tr>
      <th>difficult_to_use_child_care_because_of_quality_of_care_</th>
      <td>100.0</td>
      <td>83.401</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>iso3166_country_url</th>
      <td>0.0</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>rowid_for_the_uk_data_service_public_api</th>
      <td>0.0</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>root_uri_for_a_row_respondent_that_displays_all_data_values_for_a_single_row_via_the_uk_data_service_public_api</th>
      <td>0.0</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>unique_respondent_id</th>
      <td>0.0</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>bad_health</th>
      <td>0.0</td>
      <td>0.000</td>
    </tr>
  </tbody>
</table>
<p>200 rows × 2 columns</p>
</div></div></div>
</div>
<p>Why? In <code class="docutils literal notranslate"><span class="pre">UKDA-7724-csv/mrdoc/excel/eqls_concordance_grid.xlsx</span></code> we can see some variables not collected for given year.</p>
</div>
<div class="section" id="uk-vs-spain">
<h2>UK vs Spain<a class="headerlink" href="#uk-vs-spain" title="Permalink to this headline">¶</a></h2>
<p>Further to the missing data we saw above, grouped by wave/year, how do missing values look for each country of collection?</p>
<p>Compare the UK with Spain:</p>
<ul class="simple">
<li><p>are there columns that have all values for one country but some are missing for the other?</p></li>
<li><p>are there columns that don’t have any values for one country but at least some are present for the other?</p></li>
</ul>
<p>What implications are there from your answers to the above questions?</p>
<p>For simplicity, just look at 2011 data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select 2011 data</span>
<span class="n">df_2011</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;eqls_wave&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Some code for parsing the data in mrdoc/excel/eqls_concordance_grid.xlsx&quot;</span>
<span class="c1"># E.g. country data is categorically encoded in our DataFrame but not human readable</span>
<span class="c1"># We can get the human readable categories from this file</span>


<span class="c1"># load the categorical value data from excel workbook, specifying the appropriate sheet</span>
<span class="n">cat_vals_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">CATEGORICAL_VALUES_XLSX_PATH</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="n">CATEGORICAL_VALUES_XLSX_SHEET_NAME</span><span class="p">)</span>

<span class="c1"># display head</span>
<span class="n">cat_vals_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Variable name</th>
      <th>Variable label</th>
      <th>Variable question text</th>
      <th>Topic Classifications</th>
      <th>Keywords</th>
      <th>Variable Groups</th>
      <th>Values if present - 2007</th>
      <th>Values if present - 2011</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Wave</td>
      <td>EQLS Wave</td>
      <td>EQLS Wave</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Administrative Variables</td>
      <td>2 = 2007\n3 = 2011</td>
      <td>2 = 2007\n3 = 2011</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Y11_Country</td>
      <td>Country</td>
      <td>Country</td>
      <td>Geographies</td>
      <td>NaN</td>
      <td>Household Grid and Country</td>
      <td>1 = Austria\n2 = Belgium\n3 = Bulgaria\n4 = Cy...</td>
      <td>1 = Austria\n2 = Belgium\n3 = Bulgaria\n4 = Cy...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Y11_Q31</td>
      <td>Marital status</td>
      <td>Marital status</td>
      <td>Social stratification and groupings - Family l...</td>
      <td>Marital status</td>
      <td>Family and Social Life</td>
      <td>1 = Married or living with partner\n2 = Separa...</td>
      <td>1 = Married or living with partner\n2 = Separa...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Y11_Q32</td>
      <td>No. of children</td>
      <td>Number of children of your own</td>
      <td>Social stratification and groupings - Family l...</td>
      <td>Children</td>
      <td>Family and Social Life</td>
      <td>5 = 5 or more children</td>
      <td>5 = 5 or more children</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Y11_ISCEDsimple</td>
      <td>Education completed</td>
      <td>Highest level of education completed</td>
      <td>Education - Higher and further</td>
      <td>Education levels</td>
      <td>Education</td>
      <td>1 = No education completed (ISCED 0)\n2 = Prim...</td>
      <td>1 = No education completed (ISCED 0)\n2 = Prim...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>You can write your own function to extract the data you need from the <code class="docutils literal notranslate"><span class="pre">cat_vals_df</span></code> dataframe, input it manually, or use our prewritten function</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># note: if you get &quot;NameError: name &#39;parse_country_values_2011&#39; is not defined&quot;, go and run</span>
<span class="c1"># the code in the &quot;Code For Later&quot; section.</span>
<span class="n">country_mapping_2011</span> <span class="o">=</span> <span class="n">parse_country_values_2011</span><span class="p">(</span><span class="n">categorical_values_df</span><span class="o">=</span><span class="n">cat_vals_df</span><span class="p">)</span>

<span class="c1"># display</span>
<span class="n">country_mapping_2011</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{1: &#39;Austria&#39;,
 2: &#39;Belgium&#39;,
 3: &#39;Bulgaria&#39;,
 4: &#39;Cyprus&#39;,
 5: &#39;Czech Republic&#39;,
 6: &#39;Germany&#39;,
 7: &#39;Denmark&#39;,
 8: &#39;Estonia&#39;,
 9: &#39;Greece&#39;,
 10: &#39;Spain&#39;,
 11: &#39;Finland&#39;,
 12: &#39;France&#39;,
 13: &#39;Hungary&#39;,
 14: &#39;Ireland&#39;,
 15: &#39;Italy&#39;,
 16: &#39;Lithuania&#39;,
 17: &#39;Luxembourg&#39;,
 18: &#39;Latvia&#39;,
 19: &#39;Malta&#39;,
 20: &#39;Netherlands&#39;,
 21: &#39;Poland&#39;,
 22: &#39;Portugal&#39;,
 23: &#39;Romania&#39;,
 24: &#39;Sweden&#39;,
 25: &#39;Slovenia&#39;,
 26: &#39;Slovakia&#39;,
 27: &#39;UK&#39;,
 28: &#39;Turkey&#39;,
 29: &#39;Croatia&#39;,
 30: &#39;Macedonia (FYROM)&#39;,
 31: &#39;Kosovo&#39;,
 32: &#39;Serbia&#39;,
 33: &#39;Montenegro&#39;,
 34: &#39;Iceland&#39;,
 35: &#39;Norway&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># add country_human column with mapped value</span>
<span class="n">df_2011</span><span class="p">[</span><span class="s2">&quot;country_human&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_2011</span><span class="p">[</span><span class="s2">&quot;country&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">country_mapping_2011</span><span class="p">)</span> <span class="c1"># ignore set with copy warning</span>

<span class="c1"># % missing values in each column for each country</span>
<span class="n">by_country</span> <span class="o">=</span> <span class="n">df_2011</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;country_human&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">g</span><span class="p">:</span> <span class="n">g</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>

<span class="c1"># extract UK and Spain</span>
<span class="n">uk_vs_spain</span> <span class="o">=</span> <span class="n">by_country</span><span class="p">[[</span><span class="s2">&quot;UK&quot;</span><span class="p">,</span> <span class="s2">&quot;Spain&quot;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/var/folders/xv/d5nvn2ps5r3fcf276w707n01qdmpqf/T/ipykernel_20762/1548146086.py:2: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  df_2011[&quot;country_human&quot;] = df_2011[&quot;country&quot;].map(country_mapping_2011) # ignore set with copy warning
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># one 0% NA but not the other</span>
<span class="n">uk_vs_spain</span><span class="p">[(</span><span class="n">uk_vs_spain</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">sum</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>country_human</th>
      <th>UK</th>
      <th>Spain</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>rural_urban_living</th>
      <td>0.577</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>dv_rural_urban_living</th>
      <td>0.577</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>degree_of_urbanisation</th>
      <td>5.595</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>health_condition</th>
      <td>0.044</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>how_frequently_take_part_in_sports_or_exercise_</th>
      <td>0.089</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>how_frequently_participate_in_social_activities_</th>
      <td>0.089</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>how_often_worked_unpaid_for_community_services_last_12_months_</th>
      <td>0.000</td>
      <td>0.794</td>
    </tr>
    <tr>
      <th>how_often_worked_unpaid_for_education_cultural_etc_organisation_last_12_months_</th>
      <td>0.000</td>
      <td>0.794</td>
    </tr>
    <tr>
      <th>how_satisfied_with_present_standard_of_living_</th>
      <td>0.044</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>how_satisfied_with_accommodation_</th>
      <td>0.044</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>how_satisfied_with_family_life_</th>
      <td>0.755</td>
      <td>0.000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="your-turn">
<h2>Your Turn!<a class="headerlink" href="#your-turn" title="Permalink to this headline">¶</a></h2>
<p>We now leave it to you to learn something interesting from the dataset, using any of the techniques we’ve learned. You could attempt to explore questions like the ones below, for example, but pick anything that appeals to you. Always take care to consider whether the values you’ve calculated are likely to be representative.</p>
<ul class="simple">
<li><p>Which age group is most optimistic about the future?</p></li>
<li><p>Which country has the most trust in the police? And the least?</p></li>
<li><p>Are there differences between genders for the highest level of education completed? Does this vary by country and/or age group?</p></li>
</ul>
<p>If you prefer, you could also do this with one of the example datasets we used during teaching:</p>
<ul class="simple">
<li><p>World Bank percentage of people living in urban environments (Section 2.1.4 Data Sources and Formats)</p></li>
<li><p>Iris dataset (Section 2.2.1 Data Consistency)</p></li>
<li><p>Anthropometric Survey of US Army Personnel (Section 2.2.3 Feature Engineering)</p></li>
<li><p>New York Patient Characteristics Survey (Section 2.2.4.3 Categorical Data)</p></li>
</ul>
<p>These datasets are stored in the <code class="docutils literal notranslate"><span class="pre">coursebook/modules/m2/data</span></code> directory, but you may prefer to download the original versions as we made modifications for teaching.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Which age group is most optimistic about the future?</span>

<span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;age&quot;</span><span class="p">)[</span><span class="s2">&quot;i_am_optimistic_about_the_future&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="c1"># younger people seem to be more optimistic on average</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>age
1    2.163824
2    2.346278
3    2.548597
4    2.679574
5    2.752320
Name: i_am_optimistic_about_the_future, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Which country has the most trust in the police? And the least?</span>

<span class="n">df_2011</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;country_human&quot;</span><span class="p">)[</span><span class="s2">&quot;how_much_trust_the_police_&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span>
<span class="c1"># Bulgaria have the least trust, Finland the most</span>

<span class="c1"># Caveat for all of this: ~1000 respondents per country (and check user guide for details on data collection)!</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>country_human
Bulgaria             4.168737
Serbia               4.331643
Montenegro           4.531773
Romania              4.583611
Macedonia (FYROM)    4.660144
Croatia              4.662614
Slovakia             4.718782
Cyprus               4.771574
Greece               4.876754
Latvia               4.958420
Slovenia             4.971660
Hungary              5.078764
Czech Republic       5.098802
Poland               5.243012
Lithuania            5.260073
Kosovo               5.314096
Portugal             5.587649
Italy                5.750224
France               5.783880
Belgium              5.892430
Spain                6.129593
Malta                6.338809
Estonia              6.411224
Netherlands          6.498004
UK                   6.529096
Luxembourg           6.575605
Ireland              6.644359
Turkey               6.708880
Sweden               6.716000
Germany              6.842923
Austria              6.927734
Denmark              7.830059
Iceland              7.952953
Finland              8.138643
Name: how_much_trust_the_police_, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Are there differences between genders for the highest level of education completed? Does this vary</span>
<span class="c1"># by country and/or age group?</span>

<span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;gender&quot;</span><span class="p">)[</span><span class="s2">&quot;education_completed&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="c1"># Males seem to reach (are given the opportunity to reach) a slightly higher education level</span>
<span class="c1"># on average, but we&#39;d need to check the significance of this.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>gender
1    4.106716
2    3.952754
Name: education_completed, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edu_age_m</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;gender&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;age&quot;</span><span class="p">)[</span><span class="s2">&quot;education_completed&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">edu_age_f</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;gender&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;age&quot;</span><span class="p">)[</span><span class="s2">&quot;education_completed&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="n">edu_age_m</span> <span class="o">-</span> <span class="n">edu_age_f</span>
<span class="c1"># The difference appears to be larger in older people and disappears (maybe even reverts)</span>
<span class="c1"># in younger people.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>age
1   -0.049220
2   -0.007889
3    0.043056
4    0.145832
5    0.453163
Name: education_completed, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edu_cntry_m</span> <span class="o">=</span> <span class="n">df_2011</span><span class="p">[</span><span class="n">df_2011</span><span class="p">[</span><span class="s2">&quot;gender&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;country_human&quot;</span><span class="p">)[</span><span class="s2">&quot;education_completed&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">edu_cntry_f</span> <span class="o">=</span> <span class="n">df_2011</span><span class="p">[</span><span class="n">df_2011</span><span class="p">[</span><span class="s2">&quot;gender&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;country_human&quot;</span><span class="p">)[</span><span class="s2">&quot;education_completed&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="p">(</span><span class="n">edu_cntry_m</span> <span class="o">-</span> <span class="n">edu_cntry_f</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span>
<span class="c1"># Ireland, Estonia, Latvia : Top 3 countries with higher female education than male</span>
<span class="c1"># Turkey, Romania, Malta : Top 3 countries with  higher male education than female</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>country_human
Ireland             -0.375420
Estonia             -0.181662
Latvia              -0.171925
Finland             -0.126074
Lithuania           -0.087181
Bulgaria            -0.032975
Iceland             -0.017156
Slovenia             0.004494
Hungary              0.026447
Denmark              0.030770
Sweden               0.047772
France               0.060102
Austria              0.072093
Italy                0.097751
Portugal             0.098896
Poland               0.107906
Cyprus               0.113697
UK                   0.127559
Czech Republic       0.131751
Montenegro           0.138855
Belgium              0.150959
Serbia               0.166398
Spain                0.185198
Macedonia (FYROM)    0.185369
Netherlands          0.187195
Slovakia             0.194347
Croatia              0.258897
Greece               0.294329
Germany              0.297801
Kosovo               0.333768
Luxembourg           0.385009
Malta                0.387355
Romania              0.486371
Turkey               0.562414
Name: education_completed, dtype: float64
</pre></div>
</div>
</div>
</div>
<p><strong>CAVEAT!</strong> The dataset includes weighting factors that should be used when computing some stats and comparing countries. We’ve simplified and not included that here. See the user guide for details if needed.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "alan-turing-institute/rds-course",
            ref: "develop",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./modules/m2"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="2-hands-on.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Module 2: Hands-on session</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../m3/overview.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Overview</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Research Engineering Group, The Alan Turing Institute<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>